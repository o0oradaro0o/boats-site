import{a as V,b as le,c as ce}from"./chunk-FQCD2QRE.js";import{a as ne,b as ie,c as ae,d as re,e as oe,f as L,g as D,h as se,i as me,j,k as K,l as pe}from"./chunk-7M7DTZZT.js";import{A as z,Aa as Q,Da as S,Ea as X,Fa as x,G as f,Ga as v,H as q,K as O,L as N,La as Y,M as B,Ma as w,Na as A,Oa as I,Pa as $,Ra as Z,X as M,Y as o,Z as y,aa as u,ca as c,ga as a,ha as r,ia as d,ja as P,ka as E,la as W,lb as ee,na as C,nb as H,oa as g,pb as te,ra as _,wa as m,xa as b,ya as h,za as J}from"./chunk-K4GFJG2A.js";var _e=t=>({width:t});function Pe(t,p){t&1&&(a(0,"th",9),m(1," Competitive Win % "),r())}function Ee(t,p){t&1&&(a(0,"th",10),m(1,"KDR"),r())}function be(t,p){t&1&&(a(0,"th",11),m(1," Average Last Hits "),r())}function we(t,p){if(t&1&&(a(0,"td"),m(1),r()),t&2){let e=g().$implicit;o(),h(" ",e.compGames?(e.compWins/e.compGames*100).toFixed(2)+"%":"N/A"," ")}}function Ie(t,p){if(t&1&&(a(0,"td"),m(1),d(2,"div",14),r()),t&2){let e=g().$implicit,i=g();o(),h(" ",(e.kills/e.deaths).toFixed(2)," "),o(),c("ngStyle",S(2,_e,i.getKDPercent(e.kills/e.deaths)))}}function Le(t,p){if(t&1&&(a(0,"td"),m(1),r()),t&2){let e=g().$implicit;o(),h(" ",(e.lastHits/e.games).toFixed(2)," ")}}function Ge(t,p){if(t&1){let e=W();a(0,"tr",12),C("click",function(){let n=N(e).$implicit,s=g();return B(s.handleClick(n.playerID))}),P(1),a(2,"td"),m(3),r(),a(4,"td"),m(5),r(),u(6,we,2,1,"td",13)(7,Ie,3,4,"td",13)(8,Le,2,1,"td",13),a(9,"td"),m(10),x(11,"howLongAgo"),r(),E(),r()}if(t&2){let e=p.$implicit,i=g();o(3),b(e.playerName),o(2),b(e.games),o(),c("ngIf",!i.isSmallScreen),o(),c("ngIf",!i.isSmallScreen),o(),c("ngIf",!i.isSmallScreen),o(2),h(" ",v(11,6,e.lastGame)," ")}}var ge=(()=>{class t{router;breakpointObserver;SimplePlayersList;filteredPlayersList;sortedData;isSmallScreen;constructor(e,i){this.router=e,this.breakpointObserver=i}ngOnChanges(e){if(e.SimplePlayersList){this.filteredPlayersList||(this.filteredPlayersList=[]),this.SimplePlayersList&&this.SimplePlayersList.Content.forEach(n=>{this.filteredPlayersList.push(n)});let i=this.filteredPlayersList.slice();this.sortedData=i,this.sortedData=i.sort((n,s)=>G(new Date(n.games),new Date(s.games),!1))}}ngOnInit(){this.isSmallScreen=this.breakpointObserver.isMatched("(max-width: 599px)"),this.breakpointObserver.observe(["(min-width: 500px)"]).subscribe(e=>{this.isSmallScreen=this.breakpointObserver.isMatched("(max-width: 599px)")})}sortData(e){let i=this.filteredPlayersList.slice();if(!e.active||e.direction===""){this.sortedData=i;return}this.sortedData=i.sort((n,s)=>{let l=e.direction==="asc";switch(e.active){case"name":return G(n.playerName,s.playerName,l);case"games":return G(n.games,s.games,l);case"winper":return G(n.compGames>0?n.compWins/n.compGames:-1,s.compGames>0?s.compWins/s.compGames:-1,l);case"KD":return G(n.kills/n.deaths,s.kills/s.deaths,l);case"lastHits":return G(n.lastHits/n.games,s.lastHits/s.games,l);case"RecentGame":return G(new Date(n.lastGame),new Date(s.lastGame),l);default:return G(n.games,s.games,l)}})}getKDPercent(e){return e>3?"100%":`${e*100/3}%`}handleClick(e){this.router.navigate(["/players",e])}static \u0275fac=function(i){return new(i||t)(y(H),y(ie))};static \u0275cmp=f({type:t,selectors:[["players-list"]],inputs:{SimplePlayersList:"SimplePlayersList"},features:[O],decls:14,vars:4,consts:[["matSort","",1,"table","table-striped","table-hover","table-responsive-lg","small",3,"matSortChange"],[1,"bg-gray-100","text-gray-500"],["mat-sort-header","name"],["mat-sort-header","games"],["mat-sort-header","winper","title","Only counts games with >5 players",4,"ngIf"],["mat-sort-header","KD",4,"ngIf"],["mat-sort-header","lastHits",4,"ngIf"],["mat-sort-header","RecentGame"],["class","innerRow",3,"click",4,"ngFor","ngForOf"],["mat-sort-header","winper","title","Only counts games with >5 players"],["mat-sort-header","KD"],["mat-sort-header","lastHits"],[1,"innerRow",3,"click"],[4,"ngIf"],[1,"kd-segment",3,"ngStyle"]],template:function(i,n){i&1&&(a(0,"table",0),C("matSortChange",function(l){return n.sortData(l)}),a(1,"thead",1)(2,"tr")(3,"th",2),m(4,"Name"),r(),a(5,"th",3),m(6,"Games Played"),r(),u(7,Pe,2,0,"th",4)(8,Ee,2,0,"th",5)(9,be,2,0,"th",6),a(10,"th",7),m(11,"Most Recent Game"),r()()(),a(12,"tbody"),u(13,Ge,12,8,"tr",8),r()()),i&2&&(o(7),c("ngIf",!n.isSmallScreen),o(),c("ngIf",!n.isSmallScreen),o(),c("ngIf",!n.isSmallScreen),o(4),c("ngForOf",n.sortedData))},dependencies:[w,A,I,L,D,V],styles:[".kd-segment[_ngcontent-%COMP%]{background-color:#000;height:4px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem}"]})}return t})();function G(t,p,e){return(t<p?-1:1)*(e?1:-1)}var he=(()=>{class t{SimplePlayersList;constructor(e){this.SimplePlayersList=e.getTopPlayers()}ngOnInit(){}static \u0275fac=function(i){return new(i||t)(y(j))};static \u0275cmp=f({type:t,selectors:[["app-players"]],decls:5,vars:3,consts:[["text","Player Stats"],[1,"bg-gray-vertical-emboss","py-5"],[1,"container"],[3,"SimplePlayersList"]],template:function(i,n){i&1&&(d(0,"app-page-banner",0),a(1,"div",1)(2,"div",2),d(3,"players-list",3),x(4,"async"),r()()),i&2&&(o(3),c("SimplePlayersList",v(4,1,n.SimplePlayersList)))},dependencies:[K,ge,$]})}return t})();var Re=(t,p)=>({"winner-color":t,"loser-color":p}),Te=t=>({width:t});function ke(t,p){if(t&1){let e=W();a(0,"tr",4),C("click",function(){let n=N(e).$implicit,s=g(2);return B(s.handleClick(n.matchID))}),a(1,"td"),d(2,"img",5),r(),a(3,"td")(4,"div",6)(5,"strong"),m(6),r()(),a(7,"div"),m(8),x(9,"howLongAgo"),r()(),a(10,"td")(11,"div")(12,"strong"),m(13),r()(),a(14,"div")(15,"small"),m(16),r()()(),a(17,"td"),m(18),r(),a(19,"td"),m(20),r(),a(21,"td"),m(22),x(23,"secondsToHhmmss"),d(24,"div",7),r()()}if(t&2){let e=p.$implicit,i=g(2);o(2),_("src","/assets/boat-icons/"+e.shp.split(" ").join("_").replace("'","")+".png",M),_("alt",e.shp),o(2),c("ngClass",X(18,Re,e.tm===e.wn,e.tm!==e.wn)),o(2),b(e.tm===e.wn?"Won Game":"Lost Game"),o(2),b(v(9,14,e.dateProcessed)),o(5),b(e.coOp?"Co-Op":"Normal"),o(3),Q(" ",e.battle?"Battle":""," ",e.battle&&e.trading?"-":""," ",e.trading?"Trading":""," "),o(2),b(e.numPlayers),o(2),J("",e.kls,"/",e.dth,""),o(2),h(" ",v(23,16,e.gameDuration)," "),o(2),c("ngStyle",S(21,Te,i.getDurationPercent(e.gameDuration)))}}function Fe(t,p){if(t&1&&(P(0),u(1,ke,25,23,"tr",3),E()),t&2){let e=g();o(),c("ngForOf",e.recentGames.Content)}}var fe=(()=>{class t{router;recentGames;constructor(e){this.router=e}ngOnInit(){}handleClick(e){this.router.navigate(["/games",e])}getDurationPercent(e){return`${e<3600?e/36:100}%`}static \u0275fac=function(i){return new(i||t)(y(H))};static \u0275cmp=f({type:t,selectors:[["app-player-recent-games-list"]],inputs:{recentGames:"recentGames"},decls:17,vars:1,consts:[["matSort","",1,"table","table-striped","table-hover","small"],[1,"bg-gray-100","text-gray-500"],[4,"ngIf"],["class","innerRow",3,"click",4,"ngFor","ngForOf"],[1,"innerRow",3,"click"],[1,"boat-icons",3,"src","alt"],[3,"ngClass"],[1,"duration-segment",3,"ngStyle"]],template:function(i,n){i&1&&(a(0,"table",0)(1,"thead",1)(2,"tr")(3,"th"),m(4,"Ship"),r(),a(5,"th"),m(6,"Result"),r(),a(7,"th"),m(8,"Game Mode"),r(),a(9,"th"),m(10,"Players"),r(),a(11,"th"),m(12,"K/D"),r(),a(13,"th"),m(14,"Duration"),r()()(),a(15,"tbody"),u(16,Fe,2,1,"ng-container",2),r()()),i&2&&(o(16),c("ngIf",n.recentGames))},dependencies:[Y,w,A,I,L,V,le],styles:[".boat-icons[_ngcontent-%COMP%]{height:40px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem;vertical-align:middle}.winner-color[_ngcontent-%COMP%]{color:green}.loser-color[_ngcontent-%COMP%]{color:red}.duration-segment[_ngcontent-%COMP%]{background-color:#000;height:4px}"]})}return t})();var ue=t=>({width:t});function Be(t,p){if(t&1&&(a(0,"tr",6),P(1),a(2,"td"),d(3,"img",7),r(),a(4,"td"),m(5),d(6,"div",8),r(),a(7,"td"),m(8),d(9,"div",8),r(),E(),r()),t&2){let e=p.$implicit,i=g();o(3),_("src","/assets/items/"+e.item.replace("item_","")+".png",M),_("alt",e.item),o(2),h(" ",e.compGames?(e.compGames/i.TotalSample*100).toFixed(2)+"%":"N/A"," "),o(),c("ngStyle",S(6,ue,i.getPercent(e.compGames/i.TotalSample*18))),o(2),h(" ",e.compGames?(e.compWins/e.compGames*100).toFixed(2)+"%":"N/A"," "),o(),c("ngStyle",S(8,ue,i.getPercent(e.compWins/e.compGames)))}}var ye=(()=>{class t{ItemRecordList;CondencedItemRecords;sortedData;TotalSample;constructor(){}ngOnChanges(e){if(e.ItemRecordList){this.CondencedItemRecords||(this.CondencedItemRecords=[]),this.ItemRecordList&&(this.TotalSample=0,this.ItemRecordList.Content.forEach(n=>{n.item&&n.compGames>0&&!n.item.includes("lorne")&&!n.item.includes("caulk")&&!n.item.includes("combo")&&(this.TotalSample=this.TotalSample+n.compGames,this.CondencedItemRecords.push(n))}));let i=this.CondencedItemRecords.slice();this.sortedData=i,this.sortedData=i.sort((n,s)=>k(new Date(n.compGames),new Date(s.compGames),!1))}}ngOnInit(){}sortData(e){let i=this.CondencedItemRecords.slice();if(!e.active||e.direction===""){this.sortedData=i;return}this.sortedData=i.sort((n,s)=>{let l=e.direction==="asc";switch(e.active){case"name":return k(n.item,s.item,l);case"games":return k(n.compGames,s.compGames,l);case"winper":return k(n.compGames>0?n.compWins/n.compGames:-1,s.compGames>0?s.compWins/s.compGames:-1,l);default:return k(n.compGames,s.compGames,l)}})}getPercent(e){return e>3?"100%":`${e*100/3}%`}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["player-items-list"]],inputs:{ItemRecordList:"ItemRecordList"},features:[O],decls:11,vars:1,consts:[["matSort","",1,"table","table-striped","table-hover","small",3,"matSortChange"],[1,"bg-gray-100","text-gray-500"],["mat-sort-header","name"],["mat-sort-header","games","title","Only counts games with >5 players"],["mat-sort-header","winper","title","Only counts games with >5 players"],["class","innerRow",4,"ngFor","ngForOf"],[1,"innerRow"],[1,"item-icons",3,"src","alt"],[1,"segment",3,"ngStyle"]],template:function(i,n){i&1&&(a(0,"table",0),C("matSortChange",function(l){return n.sortData(l)}),a(1,"thead",1)(2,"tr")(3,"th",2),m(4,"Name"),r(),a(5,"th",3),m(6," Use Rate "),r(),a(7,"th",4),m(8," Competitive Win Rate "),r()()(),a(9,"tbody"),u(10,Be,10,10,"tr",5),r()()),i&2&&(o(10),c("ngForOf",n.sortedData))},dependencies:[w,I,L,D],styles:[".item-icons[_ngcontent-%COMP%]{height:40px}.segment[_ngcontent-%COMP%]{background-color:#000;height:4px}.innerRow[_ngcontent-%COMP%]:hover{cursor:default}"]})}return t})();function k(t,p,e){return(t<p?-1:1)*(e?1:-1)}var Se=t=>({width:t});function Ae(t,p){if(t&1&&(a(0,"tr",6),P(1),a(2,"td"),d(3,"img",7),r(),a(4,"td"),m(5),d(6,"div",8),r(),a(7,"td"),m(8),d(9,"div",8),r(),E(),r()),t&2){let e=p.$implicit,i=g();o(3),_("src","/assets/boat-icons/"+e.item.split(" ").join("_").replace("'","")+".png",M),_("alt",e.item),o(2),h(" ",e.compGames?(e.compGames/i.TotalSample*100).toFixed(2)+"%":"N/A"," "),o(),c("ngStyle",S(6,Se,i.getPercent(e.compGames/i.TotalSample*10))),o(2),h(" ",e.compGames?(e.compWins/e.compGames*100).toFixed(2)+"%":"N/A"," "),o(),c("ngStyle",S(8,Se,i.getPercent(e.compWins/e.compGames)))}}var xe=(()=>{class t{ItemRecordList;CondencedItemRecords;sortedData;TotalSample;constructor(){}ngOnChanges(e){if(e.ItemRecordList){this.CondencedItemRecords||(this.CondencedItemRecords=[]),this.ItemRecordList&&(this.TotalSample=0,this.ItemRecordList.Content.forEach(n=>{if(n.item&&n.compGames>0&&!n.item.includes("Barrel")){this.TotalSample=this.TotalSample+n.compGames,this.CondencedItemRecords.length===0&&this.CondencedItemRecords.push(n);let s=!1;this.CondencedItemRecords.forEach(l=>{l.item===n.item&&(l.games=l.games+n.games,l.compGames=l.compGames+n.compGames,l.compWins=l.compWins+n.compWins,l.wins=l.wins+n.wins,s=!0)}),s||this.CondencedItemRecords.push(n)}}));let i=this.CondencedItemRecords.slice();this.sortedData=i,this.sortedData=i.sort((n,s)=>F(new Date(n.compGames),new Date(s.compGames),!1))}}ngOnInit(){}sortData(e){let i=this.CondencedItemRecords.slice();if(!e.active||e.direction===""){this.sortedData=i;return}this.sortedData=i.sort((n,s)=>{let l=e.direction==="asc";switch(e.active){case"name":return F(n.item,s.item,l);case"games":return F(n.compGames,s.compGames,l);case"winper":return F(n.compGames>0?n.compWins/n.compGames:-1,s.compGames>0?s.compWins/s.compGames:-1,l);default:return F(n.compGames,s.compGames,l)}})}getPercent(e){return e>3?"100%":`${e*100/3}%`}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["player-boats-list"]],inputs:{ItemRecordList:"ItemRecordList"},features:[O],decls:11,vars:1,consts:[["matSort","",1,"table","table-striped","table-hover","small",3,"matSortChange"],[1,"bg-gray-100","text-gray-500"],["mat-sort-header","name"],["mat-sort-header","games","title","Only counts games with >5 players"],["mat-sort-header","winper","title","Only counts games with >5 players"],["class","innerRow",4,"ngFor","ngForOf"],[1,"innerRow"],[1,"boat-icons",3,"src","alt"],[1,"segment",3,"ngStyle"]],template:function(i,n){i&1&&(a(0,"table",0),C("matSortChange",function(l){return n.sortData(l)}),a(1,"thead",1)(2,"tr")(3,"th",2),m(4,"Name"),r(),a(5,"th",3),m(6," Use Rate "),r(),a(7,"th",4),m(8," Competitive Win Rate "),r()()(),a(9,"tbody"),u(10,Ae,10,10,"tr",5),r()()),i&2&&(o(10),c("ngForOf",n.sortedData))},dependencies:[w,I,L,D],styles:[".boat-icons[_ngcontent-%COMP%]{height:40px}.segment[_ngcontent-%COMP%]{background-color:#000;height:4px}.innerRow[_ngcontent-%COMP%]:hover{cursor:default}"]})}return t})();function F(t,p,e){return(t<p?-1:1)*(e?1:-1)}var ve=(()=>{class t{route;ItemRecordList$;BoatRecordList$;recentGames;playerId;constructor(e,i){this.route=i,this.route.params.subscribe(n=>{this.playerId=n.id,e.getRecentMatches(this.playerId).subscribe(s=>{this.recentGames=s}),this.ItemRecordList$=e.getPlayerItemData(this.playerId),this.BoatRecordList$=e.getPlayerBoatData(this.playerId)})}ngOnInit(){}static \u0275fac=function(i){return new(i||t)(y(j),y(ee))};static \u0275cmp=f({type:t,selectors:[["app-player"]],decls:20,vars:7,consts:[["text","Player Details"],[1,"bg-gray-vertical-emboss","py-5"],[1,"container"],[1,"row"],[1,"col-12","col-md-6"],[1,"heightContainer"],[3,"ItemRecordList"],[3,"recentGames"]],template:function(i,n){i&1&&(d(0,"app-page-banner",0),a(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),m(6,"Boat Use"),r(),a(7,"div",5),d(8,"player-boats-list",6),x(9,"async"),r()(),a(10,"div",4)(11,"h4"),m(12,"Item Use"),r(),a(13,"div",5),d(14,"player-items-list",6),x(15,"async"),r()()(),d(16,"hr"),a(17,"h4"),m(18,"Recent Games"),r(),d(19,"app-player-recent-games-list",7),r()()),i&2&&(o(8),c("ItemRecordList",v(9,3,n.BoatRecordList$)),o(6),c("ItemRecordList",v(15,5,n.ItemRecordList$)),o(5),c("recentGames",n.recentGames))},dependencies:[K,fe,ye,xe,$],styles:[".heightContainer[_ngcontent-%COMP%]{height:500px;overflow-y:scroll}#banner[_ngcontent-%COMP%]{background-image:url(/assets/stats/banner.png);-webkit-box-shadow:inset 0px 0px 50px 50px rgba(0,0,0,.5);-moz-box-shadow:inset 0px 0px 50px 50px rgba(0,0,0,.5);box-shadow:inset 0 0 50px 50px #00000080}"]})}return t})();var He=[{path:"",component:he},{path:":id",component:ve}],xt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=q({type:t});static \u0275inj=z({imports:[Z,te.forChild(He),ne,ae,re,oe,se,me,ce,pe]})}return t})();export{xt as PlayersModule};
